# The 'version' tag is obsolete in modern Docker Compose and has been removed.
services:
  # This single service builds the application environment and runs the E2E tests.
  # The orchestration logic is now handled by the e2e-entrypoint.sh script,
  # which is set as the ENTRYPOINT in the Dockerfile.
  e2e-test:
    build:
      context: .
      dockerfile: Dockerfile

    # Use the .env file from the project root to supply environment variables
    # (secrets, RPC URLs, etc.) to the container during the test run.
    env_file:
      - .env

    # Map the container ports to the host machine. This allows a developer
    # to interact with the servers during a debug session if needed.
    ports:
      - "5173:5173" # Vite Frontend
      - "3000:3000" # Node.js Backend